<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!--from fontawesome-->
   <script src="https://kit.fontawesome.com/1585dc4e54.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="savannah.css">
    <title>Savannah Region</title>
    
</head>
<body>
    <header>
        <nav class="navbar">
            <a href="#" class= "nav-branding" ><span class="red">Beacon</span><span class="gold">Sur</span><span class="green">vey</span></a>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                </li>
                
                <li class="nav-item">
                    <a href="about.html" class="nav-link">About</a>
                </li>

            </ul>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </nav>
    </header> 
</body>

<script src="index.js"></script>
<main>
    
    <div class="flex-container">
        <div class="item1", id='map'>
    <script>
            function initMap(){
                var options = {
                    zoom:8, 
                    center: {lat:9.0913, lng:-1.8270}
                }
                var map = new 
                google.maps.Map(document.getElementById('map'), options);

                //CORS COORDINATES
                //SGV.CORS/2020/1
               //addMarker({coords:{lat:6.6092600,lng:0.4603820},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGV.CORS/2020/1</h3>"}); 

                //SGE.CORS/2020/2
                // addMarker({coords:{lat:6.1092690,lng:-0.3023180},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGE.CORS/2020/2</h3>"}); 

                 //SGUE.BOL/CORS/2020/1
                // addMarker({coords:{lat:10.7969210,lng:-0.8570590},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGUE.BOL/CORS/1</h3>"});

                 //TAML/CORS
                 addMarker({coords:{lat:9.4040610,lng:-0.8334610},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>TAML.CORS</h3>"});

                 //SGA.CORS/2020/3
                 //addMarker({coords:{lat:6.6879510,lng:-1.6252260},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGA.CORS/2020/3</h3>"});
               
                //SGE.CORS/2020/4
                //addMarker({coords:{lat:5.9262010,lng:-0.9863890},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGE.CORS/2020/4</h3>"});

                //SGW.CORS/2020/5
                //addMarker({coords:{lat:4.9254640,lng:-1.7740620},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGE.CORS/2020/5</h3>"});

                //SGW.CORS/2020/6
                //addMarker({coords:{lat:5.2976810,lng:-2.0000410},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGE.CORS/2020/6</h3>"});

                //SGW.CORS/2020/7
                //addMarker({coords:{lat:5.3606000,lng:-0.6331920},iconImage:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png',content:"<h3>SGE.CORS/2020/7</h3>"});

                //GCP COORDINATES
                 //DAMONGO
        addMarker({coords:{lat:9.0969110,lng:-1.8248200},
        content:"<h3>SGN/SMD/2017/1</h3>"});

        addMarker({coords:{lat:9.0969040,lng:-1.8250300},
        content:"<h3>SGN/SMD/2017/2</h3>"});

                    //SAWLA
        addMarker({coords:{lat:9.2566970, lng:-2.3881420},
        content:"<h3>SG/GRN/SAW/09/1</h3>"});

        addMarker({coords:{lat:9.2572310,lng:-2.3881740},
        content:"<h3>SG/GRN/SAW/09/2</h3>"});

        addMarker({coords:{lat:9.2825880,lng:-2.4173160},
        content:"<h3>GCS T16/5</h3>"});

        addMarker({coords:{lat:9.2088350,lng:-2.4651870},
        content:"<h3>GCS T16/3</h3>"});

                        //BUIPE
        addMarker({coords:{lat:9.1245430,lng:-1.2690900},
        content:"<h3>SGN/A079/2010/1</h3>"});

        addMarker({coords:{lat:9.1247370,lng:-1.2690850},
        content:"<h3>SGN/A079/2010/4</h3>"});

        addMarker({coords:{lat:8.7681680,lng:-1.4677670},
        content:"<h3>SGN7/62/1AFL</h3>"});

        addMarker({coords:{lat:8.7716810,lng:-1.4677220},
        content:"<h3>SGN7/62/1</h3>"});
                        
                //DABOYA
        addMarker({coords:{lat:9.5191100,lng:-1.3093470},
        content:"<h3>GCS T20/12</h3>"});
                                        
        addMarker({coords:{lat:9.5295510,lng:-1.4029700},
        content:"<h3>GCS T20/14</h3>"});

        addMarker({coords:{lat:9.5240090,lng:-1.4559720},
        content:"<h3>GCS T20/15</h3>"});

        addMarker({coords:{lat:9.5240090,lng:-1.4559720},
        content:"<h3>GCS T19/7/A</h3>"});

                 //BOLE
        addMarker({coords:{lat:9.5191100,lng:-1.3093470},
        content:"<h3>GCS T14/22</h3>"});
        
        addMarker({coords:{lat:9.0315380,lng:-2.4794830},
        content:"<h3>SGN C200/2014/5</h3>"});
 
        addMarker({coords:{lat:9.0369310,lng:-2.4881710},
        content:"<h3>SGN 39/06/6</h3>"});

                  //SALAGA
        addMarker({coords:{lat:9.4439130,lng:-0.5155510},
        content:"<h3>GCS T24/1</h3>"});
                //ADD BEACH MARKER
                function addMarker(props){
                    var marker = new google.maps.Marker({
                position:props.coords,
                map:map,  
                /*icon:props.iconImage */          
            });   

            //check customicon
            if (props.iconImage){
                //sett icon image
                marker.setIcon(props.iconImage);
            }
            //CONTENT INFO
            if (props.content){
                var infoWindow = new google.maps.InfoWindow({
                    content: props.content 
                });

                marker.addListener('click', function(){
                 infoWindow.open(map, marker);   
                });    
            }

            }
                 
            }                  
            </script>

<script async
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC3OMofyoQBZ-o4sXmRyFH625VH-8d6Zhs&callback=initMap"> 
</script>  
    </div>

    <div class="app-container">
        <h2>Search (Enter Beacon ID)</h2>
        <div id="portexe-search-root"></div>
        <div id="portexe-table-container">
        <table id="portexe-data-table">
                <thead>
                    <tr>
                        <th>Beacon ID</th>
                        <th>Northing(X)</th>
                        <th>Easting(Y)</th>
                    </tr>
                </thead>
                
                <tbody>
                    <tr>
                        <th colspan="3"> DAMONGO</th>
                     </tr>
                     <tr> 
                          <td>SGN/SMD/2017/1</td>
                          <td>1606347.383</td>
                          <td>602483.641</td>
                      </tr>
        
                      <tr> 
                        <td>SGN/SMD/2017/2</td>
                        <td>1606346.443</td>
                        <td>602407.736</td>
                    </tr>
            
                    <tr>
                          <th colspan="3">SAWLA</th>
                      </tr>
                      <tr>
                          <td>SG/GRN/SAW/09/1</td>
                          <td>1664951.09</td>
                          <td>399553.71</td>
                      </tr>
        
                      <tr>
                        <td>SG/GRN/SAW/09/2</td>
                        <td>1665145.19</td>
                        <td>399542.96</td>
                    </tr>
        
                    <tr>
                        <td>GCS T16/5</td>
                        <td>1674387.96</td>
                        <td>389073.27</td>
                    </tr>
        
        
                    <tr>
                        <td>GCS T16/3</td>
                        <td>1647693.62</td>
                        <td>371706.42</td>
                    </tr>
        
        
                      <tr>
                          <th colspan="3">BUIPE</th>
                      </tr>
                                      
                    <tr>
                        <td>SGN7/62/1AFL</td>
                        <td>1486853.88</td>
                        <td>731083.30</td>
                    </tr>
                    
                    <tr>
                        <td>SGN7/62/1</td>
                        <td>1488128.44</td>
                        <td>731101.06</td>
                    </tr>
        
                        <tr>
                        <td>SGN/A079/2010/1</td>
                        <td>1616069.538</td>
                        <td>802880.149</td>
                    </tr>

                    <tr>
                        <td>SGN/A079/2010/4</td>
                        <td>1616139.956</td>
                        <td>802882.205</td>
                    </tr>

                      <tr>
                          <th colspan="3">DABOYA</th>
                      </tr>
                      <tr>
                          <td>GCS T20/12</td>
                          <td>1759225.61</td>
                          <td>788490.69</td>
                      </tr>
        
                    <tr>
                        <td>GCS T20/14</td>
                        <td>1763048.33</td>
                        <td>754777.59</td>
                    </tr>
        
                    <tr>
                        <td>GCS T20/15</td>
                        <td>1761061.20</td>
                        <td>735686.70</td>
                    </tr>
        
                    <tr>
                        <td>GCS T19/7/A</td>
                        <td>1762510.81</td>
                        <td>727021.84</td>
                    </tr>
        
        
                      <tr>
                          <th colspan="3">BOLE</th>
                      </tr>
                      <tr>
                          <td>GCS T14/22</td>
                          <td>1562504.11</td>
                          <td>378498.08</td>
                      </tr>
                      </tr>
                   <tr>
                        <td>SGN C200/2014/5</td>
                        <td>1583374.55</td>
                        <td>366288.29</td>
                    </tr>
        
                    <tr>
                        <td>SGN 39/06/6</td>
                        <td>1585343.985</td>
                        <td>363162.017</td>
                    </tr>
                    </tr>
                      
                      <tr>
                          <th colspan="3">SALAGA</th>
                      </tr>
                      <tr>
                          <td>GCS T24/1</td>
                          <td>1369227.61</td>
                          <td>1074884.01</td>
                      </tr>
                     <tr>
                          <td></td>
                          <td></td>
                          <td></td>
                      </tr>
                    </tbody>
            </table>
        </div>
    </div>
        
     </main>     
<!--<script src="/index2.js"></script>-->
<script>
    const tableData = () => {
    const searchData = [];
    const tableEl = document.getElementById('portexe-data-table');
    Array.from(tableEl.children[1].children).forEach(_bodyRowEl => {
        searchData.push(Array.from(_bodyRowEl.children).map(_cellEl => {
                return _cellEl.innerHTML;
            }));
        });
        return searchData;
    }
    
const createSearchInputElement = () => {
    const el = document.createElement('input');
    el.classList.add('portexe-search-input');
    el.id = 'portexe-search-input'; 
    return el;
}

const search =(arr, searchTerm) => {
    if(!searchTerm) return arr;
    return arr.filter(_row => {
        return _row.find(_item => _item.toLowerCase().includes(searchTerm.toLowerCase()));
    });
}

const refreshTable = (data) =>{
    const tableBody = document.getElementById('portexe-data-table').children[1];
    tableBody.innerHTML = ''; 
    
    data.forEach(_row => {
        const curRow = document.createElement('tr');
        _row.forEach(_dataItem => {
        const curCell = document.createElement('td');
        curCell.innerText = _dataItem;
        curRow.appendChild(curCell);
        });
        tableBody.appendChild(curRow);
        });
        }
            
const init = () =>{
document.getElementById('portexe-search-root')
.appendChild(createSearchInputElement());


const initialTableData = tableData();


const searchInput = document.getElementById('portexe-search-input');
    searchInput.addEventListener('keyup', (e) => {
    refreshTable(search(initialTableData, e.target.value));
    });
}
init();

</script>
     <footer>
         <div class="footer">
             <h2>
                 <span class="red">Beacon</span><span class="gold">Sur</span><span class="green">vey</span> <i>copyright &copy; <script>document.write(new Date().getFullYear())</script></i>
             </h2> 
         </div>
         
     </footer>
     </html>
     
